import{r as t,j as e,u as R,L as I}from"./index-U8L_PdMa.js";import{c as v,a as L}from"./index-NvrdzvXg.js";import{M as J,u as V,P as K,a as Z,b as Y,c as ee,m as D,L as te}from"./proxy-CYo30RbD.js";import{S as se,M as re,H as ne}from"./sun-Df2-P-sW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],oe=v("ArrowLeft",ae);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],le=v("ArrowRight",ie);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],de=v("BookmarkPlus",ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],H=v("Bookmark",ue);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],U=v("ChevronDown",he);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],O=v("ChevronUp",me);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]],ge=v("ListMusic",xe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Q=v("Pause",fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],W=v("Play",pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],be=v("Plus",ye);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Ne=v("Search",je);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],we=v("SkipBack",ve);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],Se=v("SkipForward",ke);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],q=v("Type",Ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Pe=v("Volume2",$e);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=v("X",Me);class Te extends t.Component{getSnapshotBeforeUpdate(a){const n=this.props.childRef.current;if(n&&a.isPresent&&!this.props.isPresent){const x=n.offsetParent,j=x instanceof HTMLElement&&x.offsetWidth||0,u=this.props.sizeRef.current;u.height=n.offsetHeight||0,u.width=n.offsetWidth||0,u.top=n.offsetTop,u.left=n.offsetLeft,u.right=j-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ee({children:s,isPresent:a,anchorX:n}){const x=t.useId(),j=t.useRef(null),u=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=t.useContext(J);return t.useInsertionEffect(()=>{const{width:p,height:g,top:b,left:h,right:f}=u.current;if(a||!j.current||!p||!g)return;const r=n==="left"?`left: ${h}`:`right: ${f}`;j.current.dataset.motionPopId=x;const m=document.createElement("style");return d&&(m.nonce=d),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${x}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${g}px !important;
            ${r}px !important;
            top: ${b}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[a]),e.jsx(Te,{isPresent:a,childRef:j,sizeRef:u,children:t.cloneElement(s,{ref:j})})}const _e=({children:s,initial:a,isPresent:n,onExitComplete:x,custom:j,presenceAffectsLayout:u,mode:d,anchorX:p})=>{const g=V(Re),b=t.useId(),h=t.useCallback(r=>{g.set(r,!0);for(const m of g.values())if(!m)return;x&&x()},[g,x]),f=t.useMemo(()=>({id:b,initial:a,isPresent:n,custom:j,onExitComplete:h,register:r=>(g.set(r,!1),()=>g.delete(r))}),u?[Math.random(),h]:[n,h]);return t.useMemo(()=>{g.forEach((r,m)=>g.set(m,!1))},[n]),t.useEffect(()=>{!n&&!g.size&&x&&x()},[n]),d==="popLayout"&&(s=e.jsx(Ee,{isPresent:n,anchorX:p,children:s})),e.jsx(K.Provider,{value:f,children:s})};function Re(){return new Map}const A=s=>s.key||"";function z(s){const a=[];return t.Children.forEach(s,n=>{t.isValidElement(n)&&a.push(n)}),a}const Le=({children:s,custom:a,initial:n=!0,onExitComplete:x,presenceAffectsLayout:j=!0,mode:u="sync",propagate:d=!1,anchorX:p="left"})=>{const[g,b]=Z(d),h=t.useMemo(()=>z(s),[s]),f=d&&!g?[]:h.map(A),r=t.useRef(!0),m=t.useRef(h),w=V(()=>new Map),[T,$]=t.useState(h),[c,C]=t.useState(h);Y(()=>{r.current=!1,m.current=h;for(let y=0;y<c.length;y++){const N=A(c[y]);f.includes(N)?w.delete(N):w.get(N)!==!0&&w.set(N,!1)}},[c,f.length,f.join("-")]);const S=[];if(h!==T){let y=[...h];for(let N=0;N<c.length;N++){const k=c[N],E=A(k);f.includes(E)||(y.splice(N,0,k),S.push(k))}return u==="wait"&&S.length&&(y=S),C(z(y)),$(h),null}const{forceRender:o}=t.useContext(ee);return e.jsx(e.Fragment,{children:c.map(y=>{const N=A(y),k=d&&!g?!1:h===c||f.includes(N),E=()=>{if(w.has(N))w.set(N,!0);else return;let _=!0;w.forEach(l=>{l||(_=!1)}),_&&(o==null||o(),C(m.current),d&&(b==null||b()),x&&x())};return e.jsx(_e,{isPresent:k,initial:!r.current||n?void 0:!1,custom:a,presenceAffectsLayout:j,mode:u,onExitComplete:k?void 0:E,anchorX:p,children:y},N)})})},B=s=>s.normalize("NFD").replace(/[\u064B-\u065F]/g,""),Ae=()=>{const[s,a]=t.useState([]),[n,x]=t.useState(""),[j,u]=t.useState(!0),[d,p]=t.useState(!1),{setSelectedSurah:g,darkMode:b,selectedSurah:h}=R();if(t.useEffect(()=>{u(!0),L.get("https://api.alquran.cloud/v1/surah").then(r=>{a(r.data.data),u(!1)}).catch(r=>{console.error("Error fetching Surah list",r),u(!1)})},[]),t.useEffect(()=>{n&&p(!0)},[n]),j)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"})});const f=s.filter(r=>r.englishName.toLowerCase().includes(n)||B(r.name).includes(n)||r.number.toString().includes(n));return e.jsxs("div",{className:`p-4 rounded-xl transition-colors duration-300 ${b?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"ابحث عن سورة...",className:`w-full pl-10 pr-4 py-2 rounded-lg outline-none transition-colors ${b?"bg-gray-800 text-white placeholder-gray-500 border-gray-700":"bg-gray-100 text-gray-900 placeholder-gray-500 border-gray-200"} border`,onChange:r=>x(B(r.target.value.toLowerCase()))})]}),e.jsxs("button",{onClick:()=>p(!d),className:`w-full flex items-center justify-between p-3 rounded-lg mb-2 transition-colors ${b?"bg-gray-800":"bg-gray-100"}`,children:[e.jsx("span",{children:d?e.jsx(O,{}):e.jsx(U,{})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"font-bold",children:h?h.name:"اختر سورة"}),h&&e.jsxs("p",{children:[h.englishName," • ",h.numberOfAyahs," آية"]})]})]}),(d||n)&&e.jsx("div",{className:"max-h-[calc(100vh-16rem)] overflow-y-auto",children:f.map(r=>e.jsx("button",{onClick:()=>{g(r),x(""),p(!1)},className:`w-full text-right p-3 rounded-lg mb-2 transition-colors cursor-pointer ${b?"hover:bg-gray-800 focus:bg-gray-800":"hover:bg-gray-100 focus:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm opacity-75",children:["#",r.number]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:r.name}),e.jsxs("p",{className:`text-sm ${b?"text-gray-400":"text-gray-600"}`,children:[r.englishName," • ",r.numberOfAyahs," آية"]})]})]})},r.number))})]})},Ie=({message:s,onClose:a})=>(t.useEffect(()=>{const n=setTimeout(()=>{a()},3e3);return()=>clearTimeout(n)},[a]),e.jsx(Le,{children:e.jsx(D.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg",children:s})})),F=[{id:"1",name:"تفسير الميسر"},{id:"2",name:"تفسير الجلالين"},{id:"8",name:"تفسير الطبري"},{id:"7",name:"تفسير القرطبي"},{id:"4",name:"تفسير ابن كثير"}],qe=({ayahNumberInSurah:s,ayahNumber:a,onClose:n})=>{const[x,j]=t.useState({}),[u,d]=t.useState(!1),[p,g]=t.useState(null),[b,h]=t.useState(F[0]),[f,r]=t.useState(!0),{selectedSurah:m,darkMode:w}=R(),[T,$]=t.useState(null),[c,C]=t.useState(!1),S=t.useRef(null);t.useEffect(()=>{const y=L.CancelToken.source();return(async()=>{if(!(!(m!=null&&m.number)||!s||!f)){d(!0),g(null);try{const k=await L.get(`http://api.quran-tafseer.com/tafseer/${b.id}/${m.number}/${s}`,{cancelToken:y.token});j(k.data)}catch(k){L.isCancel(k)||(console.error("Error fetching tafsir",k),g("فشل في جلب التفسير. يرجى المحاولة مرة أخرى لاحقًا."))}finally{d(!1)}}})(),()=>{y.cancel("تم إلغاء الطلب بسبب تغيير الآية أو المفسر.")}},[m,s,b,f]),t.useEffect(()=>{a&&$(`https://cdn.islamic.network/quran/audio/128/ar.alafasy/${a}.mp3`)},[a]),t.useEffect(()=>{S.current&&c&&(S.current.pause(),C(!1))},[a]);const o=()=>{S.current&&(c?S.current.pause():S.current.play(),C(!c))};return!a||!s?null:e.jsxs("div",{className:`mt-6 p-5 rounded-xl shadow-lg transition-all ${w?"bg-gray-800 text-gray-100":"bg-gray-100 text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>r(!f),className:"w-full flex items-center justify-between py-2 text-lg font-semibold border-b border-gray-300 hover:text-blue-500 transition-all",children:["التفسير",f?e.jsx(O,{className:"w-5 h-5"}):e.jsx(U,{className:"w-5 h-5"})]}),e.jsx("button",{onClick:n,className:"p-2 ml-2 rounded-full hover:bg-gray-200 transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),f&&e.jsxs(D.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mt-4",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:e.jsx("div",{className:"flex flex-row-reverse gap-2",children:F.map(y=>e.jsx("button",{onClick:()=>h(y),className:`px-4 py-1 rounded-full text-sm font-medium transition-all shadow-md ${b.id===y.id?"bg-blue-600 text-white shadow-lg":w?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:y.name},y.id))})}),u?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-500 border-t-transparent"})}):p?e.jsx("div",{className:"text-center text-red-500 py-4",children:p}):e.jsx("div",{className:"text-right leading-loose text-lg",children:x.text}),T&&e.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[e.jsx("audio",{ref:S,src:T}),e.jsxs("button",{onClick:o,className:`px-5 py-2 rounded-full flex items-center gap-2 text-lg font-medium transition-all shadow-md ${c?"bg-red-500 hover:bg-red-600 text-white shadow-lg":"bg-green-500 hover:bg-green-600 text-white shadow-lg"}`,children:[c?e.jsx(Q,{className:"w-6 h-6"}):e.jsx(W,{className:"w-6 h-6"}),c?"إيقاف":"تشغيل"]})]})]})]})},ze=()=>{const[s,a]=t.useState([]),[n,x]=t.useState(1),[j,u]=t.useState(!0),[d,p]=t.useState(!1),[g,b]=t.useState(""),[h,f]=t.useState(null),{selectedSurah:r,darkMode:m,setDarkMode:w,fontSize:T,setFontSize:$,currentPage:c,setCurrentPage:C,addBookmark:S,updateReadingProgress:o,updateSurahProgress:y,getSurahProgress:N}=R();t.useEffect(()=>{r&&(u(!0),L.get(`https://api.alquran.cloud/v1/surah/${r.number}/ar.alafasy`).then(i=>{a(i.data.data.ayahs),x(Math.ceil(i.data.data.ayahs.length/10));const M=N(r.number);C(M),u(!1)}).catch(i=>{console.error("Error fetching Surah text",i),u(!1)}))},[r]);const k=()=>{if(c<n){const i=c+1;C(i),o(i),y(r.number,i)}},E=()=>{if(c>1){const i=c-1;C(i),o(i),y(r.number,i)}},_=()=>{var M;const i={id:Date.now(),surah:r.name,page:c,number:r.number,ayah:(M=s[(c-1)*10])==null?void 0:M.numberInSurah};S(i),b(`تمت إضافة إشارة مرجعية لسورة ${r.name}، الصفحة ${c}`),p(!0)},l=()=>{f(null)},P=()=>{C(1),y(r.number,1)};return j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-green-500 border-t-transparent"})}):e.jsxs("div",{className:`p-6 rounded-xl transition-colors duration-300 ${m?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w(!m),className:`p-2 rounded-lg cursor-pointer transition-colors ${m?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}`,children:m?e.jsx(se,{className:"w-5 h-5"}):e.jsx(re,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>$(i=>i+2),className:`p-2 rounded-lg cursor-pointer transition-colors ${m?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}`,children:[e.jsx(q,{className:"w-5 h-5"}),"+"]}),e.jsxs("button",{onClick:()=>$(i=>Math.max(i-2,12)),className:`p-2 rounded-lg cursor-pointer transition-colors ${m?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}`,children:[e.jsx(q,{className:"w-5 h-5"}),"-"]})]}),e.jsx("button",{onClick:_,className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors cursor-pointer",children:e.jsx(de,{className:"w-5 h-5"})}),d&&e.jsx(Ie,{message:g,onClose:()=>p(!1)})]}),e.jsx("div",{className:` leading-relaxed text-right ${m?"text-gray-100":"text-gray-900"}`,style:{fontSize:`${T}px`},children:s.slice((c-1)*10,c*10).map(i=>e.jsxs("span",{className:`px-1 py-2 font-semibold ${h===i.numberInSurah?"text-blue-500":""}`,children:[e.jsxs("span",{onClick:()=>f(M=>M===i.numberInSurah?null:i.numberInSurah),className:"px-1 py-2 font-semibold cursor-pointer hover:text-blue-500 transition-colors active:text-blue-500",children:[i.text," ",e.jsxs("span",{className:"text-gray-500",children:["(",i.numberInSurah,")"]})]}),h===i.numberInSurah&&e.jsx(qe,{ayahNumberInSurah:i.numberInSurah,ayahNumber:i.number,onClose:l})]},i.number))}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx("button",{onClick:k,disabled:c===n,className:`px-4 py-2 rounded-lg cursor-pointer transition-colors ${c===n?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600 cursor-pointer"}`,children:"التالي"}),e.jsxs("span",{className:m?"text-gray-300":"text-gray-600",children:["صفحة ",c," من ",n]}),e.jsx("button",{onClick:E,disabled:c===1,className:`px-4 py-2 rounded-lg transition-colors ${c===1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600 cursor-pointer"}`,children:"السابق"})]}),c>3&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("button",{onClick:P,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:["العودة إلى الصفحة الأولى",e.jsx(le,{className:"inline-block mr-2"})]})})]})},Be=[{id:"ar.alafasy",name:"مشاري العفاسي"},{id:"ar.abdulbasitmurattal",name:"عبدالباسط عبدالصمد"},{id:"ar.muhammadsiddiqalminshawimujawwad",name:"محمد صديق المنشاوي"},{id:"ar.saudalshuraim",name:"سعود الشريم"},{id:"ar.aliabdurrahmanalhuthaifyqaloon",name:"علي عبد الرحمن الحذيفي"},{id:"ar.yasseraldossari",name:"ياسر الدوسري"},{id:"ar.khaledalqahtani",name:"خالد القحطاني"},{id:"ar.ahmedalajmi",name:"احمد العجمي"}],Fe=()=>{const{selectedSurah:s,playlist:a,addToPlaylist:n,removeFromPlaylist:x}=R(),[j,u]=t.useState(!0),[d,p]=t.useState(""),[g,b]=t.useState(!1),[h,f]=t.useState(0),[r,m]=t.useState(0),[w,T]=t.useState(1),[$,c]=t.useState(()=>localStorage.getItem("selectedReciter")||"ar.alafasy"),[C,S]=t.useState(!1),o=t.useRef(null);t.useEffect(()=>{if(s){u(!0);const l=`https://cdn.islamic.network/quran/audio-surah/128/${$}/${s.number}.mp3`;p(l),u(!1)}},[s,$]),t.useEffect(()=>{localStorage.setItem("selectedReciter",$)},[$]),t.useEffect(()=>{var l;if(d&&s){const P=JSON.parse(localStorage.getItem("quran_audio")||"{}"),i=parseFloat(((l=P[s.number])==null?void 0:l.currentTime)||0);f(isNaN(i)?0:i),o.current&&o.current.pause(),o.current=new Audio(d),o.current.currentTime=i,o.current.volume=w,o.current.onloadedmetadata=()=>{m(o.current.duration)},o.current.onloadeddata=()=>{g&&o.current.play().catch(G=>console.warn("Playback Error:",G))};const M=()=>{f(o.current.currentTime),localStorage.setItem("quran_audio",JSON.stringify({...P,[s.number]:{currentTime:o.current.currentTime}}))};return o.current.addEventListener("timeupdate",M),()=>{o.current.removeEventListener("timeupdate",M),o.current.pause()}}},[d,s,g,w]);const y=()=>{o.current&&(o.current.paused?o.current.play().then(()=>b(!0)).catch(l=>console.warn("Error playing:",l)):(o.current.pause(),b(!1)))},N=l=>{o.current&&(o.current.currentTime=Math.min(Math.max(o.current.currentTime+l,0),r),f(o.current.currentTime))},k=l=>{const P=parseFloat(l.target.value);o.current&&(o.current.currentTime=P,f(P))},E=l=>{const P=parseFloat(l.target.value);T(P),o.current&&(o.current.volume=P)},_=l=>{if(isNaN(l)||l<0)return"00:00";const P=Math.floor(l/60),i=Math.floor(l%60);return`${P.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"bg-gray-900 text-white p-6 rounded-lg shadow-md mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-center",children:["🎧 استمع إلى ",s==null?void 0:s.name]}),e.jsx("button",{onClick:()=>S(!C),className:"p-2 rounded-full hover:bg-gray-700 transition-colors",title:"قائمة التشغيل",children:e.jsx(ge,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("select",{value:$,onChange:l=>c(l.target.value),className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-700",children:Be.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))})}),j?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>N(-10),className:"p-2 rounded-full hover:bg-gray-700 transition-colors cursor-pointer",children:e.jsx(we,{className:"w-5 h-5"})}),e.jsx("button",{onClick:y,className:"p-3 bg-blue-500 rounded-full hover:bg-blue-600 transition-colors cursor-pointer",children:g?e.jsx(Q,{className:"w-6 h-6"}):e.jsx(W,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>N(10),className:"p-2 rounded-full hover:bg-gray-700 transition-colors cursor-pointer",children:e.jsx(Se,{className:"w-5 h-5"})}),s&&!(a!=null&&a.find(l=>l.number===s.number))&&e.jsx("button",{onClick:()=>n(s),className:"p-2 rounded-full hover:bg-gray-700 transition-colors cursor-pointer",children:e.jsx(be,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-sm",children:_(h)}),e.jsx("input",{type:"range",min:"0",max:r||100,value:h,onChange:k,className:"flex-1 h-2 rounded-lg appearance-none bg-gray-700 accent-blue-500 cursor-pointer"}),e.jsx("span",{className:"text-sm",children:_(r)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:w,onChange:E,className:"w-24 h-2 rounded-lg appearance-none bg-gray-700 accent-blue-500 cursor-pointer"})]}),C&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"قائمة التشغيل"}),(a==null?void 0:a.length)>0?e.jsx("ul",{className:"space-y-2",children:a.map(l=>e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{children:l.name}),e.jsx("button",{onClick:()=>x(l.number),className:"text-red-500 hover:text-red-400",children:"حذف"})]},l.number))}):e.jsx("p",{className:"text-gray-400",children:"لا توجد سور في قائمة التشغيل"})]})]})]})},Ve=()=>{const{bookmarks:s,removeBookmark:a,setSelectedSurah:n,setShowBookmarks:x,darkMode:j}=R(),u=d=>{fetch(`https://api.alquran.cloud/v1/surah/${d.number}`).then(p=>p.json()).then(p=>{n(p.data),x(!1)}).catch(p=>console.error("Error loading surah:",p))};return e.jsxs("div",{className:`p-4 rounded-xl transition-colors duration-300 ${j?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),"الإشارات المرجعية"]}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",children:e.jsx(oe,{className:"w-5 h-5"})})]}),s.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{className:" text-center",children:"لم تقم بإضافة أي إشارات مرجعية بعد"})}):e.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto cursor-pointer",children:s.map(d=>e.jsxs("div",{className:`flex items-center justify-between p-4  rounded-lg hover:bg-gray-100 cursor-pointer dark:hover:bg-gray-600 transition-colors ${j?"bg-gray-50 dark:bg-gray-700":"bg-white text-gray-900"}`,children:[e.jsxs("button",{onClick:()=>u(d),className:"flex-1 text-right",children:[e.jsx("h3",{className:"font-bold cursor-pointer",children:d.surah}),e.jsxs("p",{className:"text-sm  cursor-pointer",children:["صفحة ",d.page," • آية ",d.ayah]})]}),e.jsx("button",{onClick:()=>a(d.id),className:"p-2 text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 cursor-pointer",children:e.jsx(X,{className:"w-5 h-5"})})]},d.id))})]})};function Qe(){const{selectedSurah:s,showBookmarks:a,setShowBookmarks:n}=R();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-2 px-2",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold ",children:"📖 القرآن الكريم"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(I,{to:"/worship",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"العبادات اليومية"]}),e.jsxs(I,{to:"/",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"الرئيسية"]})]})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsxs("button",{onClick:()=>n(!a),className:"inline-flex items-center px-4 py-2 text-sm font-medium cursor-pointer rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"الإشارات المرجعية"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{children:a?e.jsx(Ve,{}):e.jsx(Ae,{})}),s?e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(ze,{}),e.jsx(Fe,{})]}):e.jsx("div",{className:"lg:col-span-2 flex items-center justify-center h-[calc(100vh-12rem)]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300",children:"اختر سورة للبدء في القراءة"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"يمكنك البحث عن السورة باسمها أو رقمها من القائمة"})]})})]})]})})}export{Qe as default};
