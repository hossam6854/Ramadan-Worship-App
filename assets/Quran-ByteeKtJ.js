import{r as t,j as e,u as L,L as D}from"./index-CtmeOfDN.js";import{c as w,a as A}from"./index-CVPWxGhV.js";import{M as ne,u as X,P as oe,a as le,b as ie,c as ce,m as W,L as de}from"./proxy-DGrUmiQC.js";import{S as ue,M as me,H as he}from"./sun-B51VQOOp.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ge=w("ArrowLeft",xe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],fe=w("ArrowRight",pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],be=w("BookmarkPlus",ye);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],G=w("Bookmark",je);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],J=w("ChevronDown",ve);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],K=w("ChevronUp",Ne);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]],ke=w("ListMusic",we);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Z=w("Pause",Se);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Y=w("Play",Ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Me=w("Plus",$e);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Te=w("Search",Pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],_e=w("SkipBack",Ee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],Re=w("SkipForward",Le);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],H=w("Type",Ie);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ze=w("Volume2",Ae);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],qe=w("VolumeX",Ve);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ee=w("X",Be);class Fe extends t.Component{getSnapshotBeforeUpdate(o){const a=this.props.childRef.current;if(a&&o.isPresent&&!this.props.isPresent){const g=a.offsetParent,j=g instanceof HTMLElement&&g.offsetWidth||0,m=this.props.sizeRef.current;m.height=a.offsetHeight||0,m.width=a.offsetWidth||0,m.top=a.offsetTop,m.left=a.offsetLeft,m.right=j-m.width-m.left}return null}componentDidUpdate(){}render(){return this.props.children}}function De({children:s,isPresent:o,anchorX:a}){const g=t.useId(),j=t.useRef(null),m=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=t.useContext(ne);return t.useInsertionEffect(()=>{const{width:p,height:f,top:y,left:h,right:b}=m.current;if(o||!j.current||!p||!f)return;const r=a==="left"?`left: ${h}`:`right: ${b}`;j.current.dataset.motionPopId=g;const c=document.createElement("style");return d&&(c.nonce=d),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${f}px !important;
            ${r}px !important;
            top: ${y}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[o]),e.jsx(Fe,{isPresent:o,childRef:j,sizeRef:m,children:t.cloneElement(s,{ref:j})})}const He=({children:s,initial:o,isPresent:a,onExitComplete:g,custom:j,presenceAffectsLayout:m,mode:d,anchorX:p})=>{const f=X(Ue),y=t.useId(),h=t.useCallback(r=>{f.set(r,!0);for(const c of f.values())if(!c)return;g&&g()},[f,g]),b=t.useMemo(()=>({id:y,initial:o,isPresent:a,custom:j,onExitComplete:h,register:r=>(f.set(r,!1),()=>f.delete(r))}),m?[Math.random(),h]:[a,h]);return t.useMemo(()=>{f.forEach((r,c)=>f.set(c,!1))},[a]),t.useEffect(()=>{!a&&!f.size&&g&&g()},[a]),d==="popLayout"&&(s=e.jsx(De,{isPresent:a,anchorX:p,children:s})),e.jsx(oe.Provider,{value:b,children:s})};function Ue(){return new Map}const V=s=>s.key||"";function U(s){const o=[];return t.Children.forEach(s,a=>{t.isValidElement(a)&&o.push(a)}),o}const Oe=({children:s,custom:o,initial:a=!0,onExitComplete:g,presenceAffectsLayout:j=!0,mode:m="sync",propagate:d=!1,anchorX:p="left"})=>{const[f,y]=le(d),h=t.useMemo(()=>U(s),[s]),b=d&&!f?[]:h.map(V),r=t.useRef(!0),c=t.useRef(h),C=X(()=>new Map),[n,T]=t.useState(h),[l,$]=t.useState(h);ie(()=>{r.current=!1,c.current=h;for(let x=0;x<l.length;x++){const v=V(l[x]);b.includes(v)?C.delete(v):C.get(v)!==!0&&C.set(v,!1)}},[l,b.length,b.join("-")]);const k=[];if(h!==n){let x=[...h];for(let v=0;v<l.length;v++){const N=l[v],E=V(N);b.includes(E)||(x.splice(v,0,N),k.push(N))}return m==="wait"&&k.length&&(x=k),$(U(x)),T(h),null}const{forceRender:M}=t.useContext(ce);return e.jsx(e.Fragment,{children:l.map(x=>{const v=V(x),N=d&&!f?!1:h===l||b.includes(v),E=()=>{if(C.has(v))C.set(v,!0);else return;let P=!0;C.forEach(R=>{R||(P=!1)}),P&&(M==null||M(),$(c.current),d&&(y==null||y()),g&&g())};return e.jsx(He,{isPresent:N,initial:!r.current||a?void 0:!1,custom:o,presenceAffectsLayout:j,mode:m,onExitComplete:N?void 0:E,anchorX:p,children:x},v)})})},O=s=>s.normalize("NFD").replace(/[\u064B-\u065F]/g,""),Qe=()=>{const[s,o]=t.useState([]),[a,g]=t.useState(""),[j,m]=t.useState(!0),[d,p]=t.useState(!1),{setSelectedSurah:f,darkMode:y,selectedSurah:h}=L();if(t.useEffect(()=>{m(!0),A.get("https://api.alquran.cloud/v1/surah").then(r=>{o(r.data.data),m(!1)}).catch(r=>{console.error("Error fetching Surah list",r),m(!1)})},[]),t.useEffect(()=>{a&&p(!0)},[a]),j)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"})});const b=s.filter(r=>r.englishName.toLowerCase().includes(a)||O(r.name).includes(a)||r.number.toString().includes(a));return e.jsxs("div",{className:`p-4 rounded-xl transition-colors duration-300 ${y?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"text",placeholder:"... ابحث عن سورة",className:`w-full pr-10 pl-4 py-2 rounded-lg outline-none transition-colors text-right ${y?"bg-gray-800 text-white placeholder-gray-500 border-gray-700":"bg-gray-100 text-gray-900 placeholder-gray-500 border-gray-200"} border`,onChange:r=>g(O(r.target.value.toLowerCase()))}),e.jsx(Te,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]}),e.jsxs("button",{onClick:()=>p(!d),className:`w-full flex items-center justify-between p-3 rounded-lg mb-2 transition-colors ${y?"bg-gray-800":"bg-gray-100"}`,children:[e.jsx("span",{children:d?e.jsx(K,{}):e.jsx(J,{})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"font-bold",children:h?h.name:"اختر سورة"}),h&&e.jsxs("p",{children:[h.englishName," • ",h.numberOfAyahs," آية"]})]})]}),(d||a)&&e.jsx("div",{className:"max-h-[calc(100vh-16rem)] overflow-y-auto",children:b.map(r=>e.jsx("button",{onClick:()=>{f(r),g(""),p(!1)},className:`w-full text-right p-3 rounded-lg mb-2 transition-colors cursor-pointer ${y?"hover:bg-gray-800 focus:bg-gray-800":"hover:bg-gray-100 focus:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm opacity-75",children:["#",r.number]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:r.name}),e.jsxs("p",{className:`text-sm ${y?"text-gray-400":"text-gray-600"}`,children:[r.englishName," • ",r.numberOfAyahs," آية"]})]})]})},r.number))})]})},Xe=({message:s,onClose:o})=>(t.useEffect(()=>{const a=setTimeout(()=>{o()},3e3);return()=>clearTimeout(a)},[o]),e.jsx(Oe,{children:e.jsx(W.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg",children:s})})),Q=[{id:"ar-tafsir-muyassar",name:"تفسير الميسر"},{id:"ar-tafsir-al-wasit",name:"تفسير طنطاوي"},{id:"ar-tafsir-al-tabari",name:"تفسير الطبري"},{id:"ar-tafseer-al-qurtubi",name:"تفسير القرطبي"},{id:"ar-tafsir-ibn-kathir",name:"تفسير ابن كثير"}],We=({ayahNumberInSurah:s,ayahNumber:o,onClose:a})=>{const[g,j]=t.useState({}),[m,d]=t.useState(!1),[p,f]=t.useState(null),[y,h]=t.useState(Q[0]),[b,r]=t.useState(!0),{selectedSurah:c,darkMode:C}=L(),[n,T]=t.useState(null),[l,$]=t.useState(!1),k=t.useRef(null);t.useEffect(()=>{const x=A.CancelToken.source();return(async()=>{if(!(!(c!=null&&c.number)||!s||!b)){d(!0),f(null);try{const N=await A.get(`https://cdn.jsdelivr.net/gh/spa5k/tafsir_api@main/tafsir/${y.id}/${c.number}/${s}.json`,{cancelToken:x.token});j(N.data)}catch(N){A.isCancel(N)||(console.error("Error fetching tafsir",N),f("فشل في جلب التفسير. يرجى المحاولة مرة أخرى لاحقًا."))}finally{d(!1)}}})(),()=>{x.cancel("تم إلغاء الطلب بسبب تغيير الآية أو المفسر.")}},[c,s,y,b]),t.useEffect(()=>{o&&T(`https://cdn.islamic.network/quran/audio/128/ar.alafasy/${o}.mp3`)},[o]),t.useEffect(()=>{k.current&&l&&(k.current.pause(),$(!1))},[o]);const M=()=>{k.current&&(l?k.current.pause():k.current.play(),$(!l))};return!o||!s?null:e.jsxs("div",{className:`mt-6 p-5 rounded-xl shadow-lg transition-all ${C?"bg-gray-800 text-gray-100":"bg-gray-100 text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:a,className:"p-2 mr-2 rounded-full hover:bg-gray-200 transition-colors cursor-pointer",children:e.jsx(ee,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>r(!b),className:"w-full flex items-center justify-between py-2 text-lg font-semibold border-b border-gray-300 hover:text-blue-500 transition-all cursor-pointer",children:[b?e.jsx(K,{className:"w-5 h-5"}):e.jsx(J,{className:"w-5 h-5"}),"التفسير"]})]}),b&&e.jsxs(W.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mt-4",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:e.jsx("div",{className:"flex flex-row-reverse gap-2",children:Q.map(x=>e.jsx("button",{onClick:()=>h(x),className:`px-4 py-1 rounded-full text-sm font-medium transition-all shadow-md ${y.id===x.id?"bg-blue-600 text-white cursor-pointer shadow-lg":C?"bg-gray-700 text-gray-300 hover:bg-gray-600 cursor-pointer":"bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}`,children:x.name},x.id))})}),m?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-500 border-t-transparent"})}):p?e.jsx("div",{className:"text-center text-red-500 py-4",children:p}):e.jsx("div",{className:"text-right leading-loose text-lg",children:g.text}),n&&e.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[e.jsx("audio",{ref:k,src:n}),e.jsxs("button",{onClick:M,className:`px-5 py-2 rounded-full flex items-center gap-2 text-lg font-medium transition-all shadow-md ${l?"bg-red-500 hover:bg-red-600 text-white cursor-pointer shadow-lg":"bg-green-500 hover:bg-green-600 text-white cursor-pointer shadow-lg"}`,children:[l?e.jsx(Z,{className:"w-6 h-6"}):e.jsx(Y,{className:"w-6 h-6"}),l?"إيقاف":"تشغيل"]})]})]})]})},Ge=()=>{const[s,o]=t.useState([]),[a,g]=t.useState(1),[j,m]=t.useState(!0),[d,p]=t.useState(!1),[f,y]=t.useState(""),[h,b]=t.useState(null),{selectedSurah:r,darkMode:c,setDarkMode:C,fontSize:n,setFontSize:T,currentPage:l,setCurrentPage:$,addBookmark:k,updateReadingProgress:M,updateSurahProgress:x,getSurahProgress:v}=L();t.useEffect(()=>{r&&(m(!0),A.get(`https://api.alquran.cloud/v1/surah/${r.number}/ar.alafasy`).then(u=>{o(u.data.data.ayahs),g(Math.ceil(u.data.data.ayahs.length/10));const _=v(r.number);$(_),m(!1)}).catch(u=>{console.error("Error fetching Surah text",u),m(!1)}))},[r]);const N=()=>{if(l<a){const u=l+1;$(u),M(u),x(r.number,u)}},E=()=>{if(l>1){const u=l-1;$(u),M(u),x(r.number,u)}},P=()=>{var _;const u={id:Date.now(),surah:r.name,page:l,number:r.number,ayah:(_=s[(l-1)*10])==null?void 0:_.numberInSurah};k(u),y(`تمت إضافة إشارة مرجعية لسورة ${r.name}، الصفحة ${l}`),p(!0)},R=()=>{b(null)},z=()=>{$(1),x(r.number,1)};return j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-green-500 border-t-transparent"})}):e.jsxs("div",{className:`p-6 rounded-xl transition-colors duration-300 ${c?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:P,className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors cursor-pointer",children:e.jsx(be,{className:"w-5 h-5"})}),d&&e.jsx(Xe,{message:f,onClose:()=>p(!1)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>T(u=>Math.max(u-2,12)),className:`p-2 rounded-lg cursor-pointer transition-colors ${c?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}`,children:[e.jsx(H,{className:"w-5 h-5"}),"-"]}),e.jsxs("button",{onClick:()=>T(u=>u+2),className:`p-2 rounded-lg cursor-pointer transition-colors ${c?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}`,children:[e.jsx(H,{className:"w-5 h-5"}),"+"]}),e.jsx("button",{onClick:()=>C(!c),className:`p-2 rounded-lg cursor-pointer transition-colors ${c?"bg-gray-800 text-white":"bg-gray-100 text-gray-800"}`,children:c?e.jsx(ue,{className:"w-5 h-5"}):e.jsx(me,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:` leading-relaxed text-right ${c?"text-gray-100":"text-gray-900"}`,style:{fontSize:`${n}px`},children:s.slice((l-1)*10,l*10).map(u=>e.jsxs("span",{className:`px-1 py-2 font-semibold ${h===u.numberInSurah?"text-blue-500":""}`,children:[e.jsxs("span",{onClick:()=>b(_=>_===u.numberInSurah?null:u.numberInSurah),className:"px-1 py-2 font-semibold cursor-pointer hover:text-blue-500 transition-colors active:text-blue-500",children:[u.text," ",e.jsxs("span",{className:"text-gray-500",children:["( ",u.numberInSurah," )"]})]}),h===u.numberInSurah&&e.jsx(We,{ayahNumberInSurah:u.numberInSurah,ayahNumber:u.number,onClose:R})]},u.number))}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx("button",{onClick:N,disabled:l===a,className:`px-4 py-2 rounded-lg cursor-pointer transition-colors ${l===a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600 cursor-pointer"}`,children:"التالي"}),e.jsxs("span",{className:c?"text-gray-300":"text-gray-600",children:["صفحة ",l," من ",a]}),e.jsx("button",{onClick:E,disabled:l===1,className:`px-4 py-2 rounded-lg transition-colors ${l===1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600 cursor-pointer"}`,children:"السابق"})]}),l>3&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("button",{onClick:z,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(fe,{className:"inline-block mr-2"}),"العودة إلى الصفحة الأولى"]})})]})},Je=[{id:"ar.alafasy",name:"مشاري العفاسي"},{id:"ar.abdulbasitmurattal",name:"عبدالباسط عبدالصمد"},{id:"ar.muhammadsiddiqalminshawimujawwad",name:"محمد صديق المنشاوي"},{id:"ar.saudalshuraim",name:"سعود الشريم"},{id:"ar.aliabdurrahmanalhuthaifyqaloon",name:"علي عبد الرحمن الحذيفي"},{id:"ar.yasseraldossari",name:"ياسر الدوسري"},{id:"ar.khaledalqahtani",name:"خالد القحطاني"},{id:"ar.ahmedalajmi",name:"احمد العجمي"}],Ke=()=>{const{selectedSurah:s,playlist:o,addToPlaylist:a,removeFromPlaylist:g,setSelectedSurah:j}=L(),[m,d]=t.useState(!0),[p,f]=t.useState(""),[y,h]=t.useState(!1),[b,r]=t.useState(0),[c,C]=t.useState(0),n=t.useRef(null),T=localStorage.getItem("muted")==="true",l=parseFloat(localStorage.getItem("volume"))||1,$=parseFloat(localStorage.getItem("previousVolume"))||l,[k,M]=t.useState(T),[x,v]=t.useState(T?0:l),[N,E]=t.useState($),[P,R]=t.useState(()=>localStorage.getItem("selectedReciter")||"ar.alafasy"),[z,u]=t.useState(!1);t.useEffect(()=>{if(s){d(!0);const i=`https://cdn.islamic.network/quran/audio-surah/128/${P}/${s.number}.mp3`;f(i),d(!1)}},[s,P]),t.useEffect(()=>{localStorage.setItem("selectedReciter",P)},[P]),t.useEffect(()=>{var i;if(p&&s){const S=JSON.parse(localStorage.getItem("quran_audio")||"{}"),I=parseFloat(((i=S[s.number])==null?void 0:i.currentTime)||0);r(isNaN(I)?0:I),n.current&&n.current.pause(),n.current=new Audio(p),n.current.currentTime=I,n.current.volume=x,n.current.onloadedmetadata=()=>{C(n.current.duration)},n.current.onloadeddata=()=>{y&&n.current.play().catch(ae=>console.warn("Playback Error:",ae))};const F=()=>{r(n.current.currentTime),localStorage.setItem("quran_audio",JSON.stringify({...S,[s.number]:{currentTime:n.current.currentTime}}))};return n.current.addEventListener("timeupdate",F),()=>{n.current.removeEventListener("timeupdate",F),n.current.pause()}}},[p,s,y,x]);const _=()=>{n.current&&(n.current.paused?n.current.play().then(()=>h(!0)).catch(i=>console.warn("Error playing:",i)):(n.current.pause(),h(!1)))},q=i=>{n.current&&(n.current.currentTime=Math.min(Math.max(n.current.currentTime+i,0),c),r(n.current.currentTime))},te=i=>{const S=parseFloat(i.target.value);n.current&&(n.current.currentTime=S,r(S))};t.useEffect(()=>{localStorage.setItem("volume",x),localStorage.setItem("muted",k),localStorage.setItem("previousVolume",N)},[x,k,N]);const se=()=>{M(i=>{const S=!i;return n.current&&(S?(E(x),v(0),n.current.volume=0):(v(N),n.current.volume=N),n.current.muted=S),S})},re=i=>{const S=parseFloat(i.target.value);v(S),n.current&&(n.current.volume=S,S===0?(M(!0),n.current.muted=!0):(M(!1),n.current.muted=!1,E(S)))},B=i=>{if(isNaN(i)||i<0)return"00:00";const S=Math.floor(i/60),I=Math.floor(i%60);return`${S.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"bg-gray-900 text-white p-6 rounded-lg shadow-md mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:()=>u(!z),className:"p-2 rounded-full hover:bg-gray-700 transition-colors",title:"قائمة التشغيل",children:e.jsx(ke,{className:"w-5 h-5 cursor-pointer"})}),e.jsxs("h2",{className:"text-xl font-semibold text-center",children:["🎧 استمع إلى ",s==null?void 0:s.name]})]}),e.jsxs("div",{className:"relative mb-4 ",children:[e.jsx("select",{value:P,onChange:i=>R(i.target.value),className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-700 text-right appearance-none pr-5 cursor-pointer",children:Je.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))}),e.jsx("div",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 pointer-events-none",children:"🔽"})]}),m?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>q(-10),className:"p-2 rounded-full hover:bg-gray-700 transition-colors cursor-pointer",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:_,className:"p-3 bg-blue-500 rounded-full hover:bg-blue-600 transition-colors cursor-pointer",children:y?e.jsx(Z,{className:"w-6 h-6"}):e.jsx(Y,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>q(10),className:"p-2 rounded-full hover:bg-gray-700 transition-colors cursor-pointer",children:e.jsx(Re,{className:"w-5 h-5"})}),s&&!(o!=null&&o.find(i=>i.number===s.number))&&e.jsx("button",{onClick:()=>a(s),className:"p-2 rounded-full hover:bg-gray-700 transition-colors cursor-pointer",children:e.jsx(Me,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-sm",children:B(b)}),e.jsx("input",{type:"range",min:"0",max:c||100,value:b,onChange:te,className:"flex-1 h-2 rounded-lg appearance-none bg-gray-700 accent-blue-500 cursor-pointer"}),e.jsx("span",{className:"text-sm",children:B(c)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:se,children:k?e.jsx(qe,{className:"w-5 h-5 cursor-pointer"}):e.jsx(ze,{className:"w-5 h-5 cursor-pointer"})}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:x,onChange:re,className:"w-24 h-2 rounded-lg appearance-none bg-gray-700 accent-blue-500 cursor-pointer"})]}),z&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-right",children:"قائمة التشغيل"}),(o==null?void 0:o.length)>0?e.jsx("ul",{className:"space-y-2  ",children:o.map(i=>e.jsxs("li",{onClick:()=>{j(i)},className:"flex flex-row-reverse justify-between items-center bg-gray-600 rounded-lg p-2  gap-2 cursor-pointer",children:[e.jsx("span",{children:i.name}),e.jsx("button",{onClick:()=>g(i.number),className:"text-red-500 hover:text-red-400 cursor-pointer",children:"حذف"})]},i.number))}):e.jsx("p",{className:"text-gray-400 text-right",children:"لا توجد سور في قائمة التشغيل"})]})]})]})},Ze=()=>{const{bookmarks:s,removeBookmark:o,setSelectedSurah:a,setShowBookmarks:g,darkMode:j}=L(),m=d=>{fetch(`https://api.alquran.cloud/v1/surah/${d.number}`).then(p=>p.json()).then(p=>{a(p.data),g(!1)}).catch(p=>console.error("Error loading surah:",p))};return e.jsxs("div",{className:`p-4 rounded-xl transition-colors duration-300 ${j?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>g(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-600 dark:hover:text-gray-400 cursor-pointer",children:e.jsx(ge,{className:"w-5 h-5"})}),e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-right",children:[e.jsx(G,{className:"w-5 h-5"}),"الإشارات المرجعية"]})]}),s.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{className:" text-center",children:"لم تقم بإضافة أي إشارات مرجعية بعد"})}):e.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto cursor-pointer",children:s.map(d=>e.jsxs("div",{className:`flex items-center justify-between p-4 dark:bg-gray-200 rounded-lg  cursor-pointer dark:hover:bg-gray-600 transition-colors ${j?"bg-gray-50 dark:bg-gray-700":"bg-white text-gray-900"}`,children:[e.jsxs("button",{onClick:()=>m(d),className:"flex-1 text-right",children:[e.jsx("h3",{className:"font-bold cursor-pointer",children:d.surah}),e.jsxs("p",{className:"text-sm  cursor-pointer",children:["صفحة ",d.page," • آية ",d.ayah]})]}),e.jsx("button",{onClick:()=>o(d.id),className:"p-2 text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 cursor-pointer",children:e.jsx(ee,{className:"w-5 h-5"})})]},d.id))})]})};function rt(){const{selectedSurah:s,showBookmarks:o,setShowBookmarks:a}=L();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-2 px-2",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("header",{className:"flex flex-wrap justify-between items-center mb-8 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 order-1 md:order-2",children:[e.jsxs(D,{to:"/worship",className:"inline-flex items-center px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium text-gray-700 bg-white rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[e.jsx(de,{className:"mr-1 sm:mr-2 h-4 w-4"}),"العبادات اليومية"]}),e.jsxs(D,{to:"/",className:"inline-flex items-center px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium text-gray-700 bg-white rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[e.jsx(he,{className:"mr-1 sm:mr-2 h-4 w-4"}),"الرئيسية"]})]}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold w-full text-center md:w-auto md:text-right",children:"📖 القرآن الكريم"})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsxs("button",{onClick:()=>a(!o),className:"inline-flex items-center px-4 py-2 text-sm font-medium cursor-pointer rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"الإشارات المرجعية"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{children:o?e.jsx(Ze,{}):e.jsx(Qe,{})}),s?e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(Ge,{}),e.jsx(Ke,{})]}):e.jsx("div",{className:"lg:col-span-2 flex items-center justify-center h-[calc(100vh-12rem)]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300",children:"اختر سورة للبدء في القراءة"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"يمكنك البحث عن السورة باسمها أو رقمها من القائمة"})]})})]})]})})}export{rt as default};
